{{#layout}}

{{#styles}}
<link rel="stylesheet" href="{{contextPath}}/assets/vendor/datatables/media/css/dataTables.bootstrap4.css">
<link rel="stylesheet" href="{{contextPath}}/assets/vendor/googleapis/css/component.css">
<link rel="stylesheet" href="{{contextPath}}/assets/vendor/googleapis/css/googleapis.css">
<link rel="stylesheet" href="{{contextPath}}/assets/vendor/select2/css/select2.css">
<link rel="stylesheet" href="{{contextPath}}/assets/vendor/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css">
{{/styles}}

{{#title}}
Entry Mutasi Hutang - DKPP
{{/title}}
<div class="main-content">
    <div class="content-view">

        <div class="card card-block">
            <div class="col-lg-12">
                <div class="row">
                    <div class="col-lg-5">
                        <label for="periodeMutasi" class="col-sm-5 bold"   >Periode Mutasi</label>

                        <div class="col-xs-4">
                            <input class="form-control form-control-sm" disabled type="text" value="{{periodeMutasi}}" id="periodeMutasi">
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <label for="example-text-input" class="col-sm-5 bold"   >Tanggal Mutasi Terakhir</label>

                        <div class="col-xs-4">
                            <input class="form-control form-control-sm" disabled type="text" value="" id="example-text-input">
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <span class="tag tag-pill tag-info pull-right">Belum Validasi</span>
                    </div>

                </div>
                <div class="row">
                    <hr/>
                </div>

            </div>

            <div class="col-lg-12">

                <h6 class="card-title small bold">Data Peserta dan Penerima MP</h6>
                <div class="col-lg-8">
                    <div class="row">
                        <label for="nipNamaPeserta" class="col-sm-3">NIP - Nama Peserta</label>

                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" type="text" disabled value="" id="nipNamaPeserta">
                        </div>
                    </div>
                    <div class="row">
                        <label for="example-text-input" class="col-sm-3"> <b>ID - Nama Penerima</b> </label>

                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" disabled type="text"  value="" id="idNamaPenerimaMp">
                        </div>
                    </div>
                    <div class="row">
                        <label for="golonganJabatan" class="col-sm-3">Golongan/Jabatan/Satker</label>
                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" disabled type="text" value="" id="golonganJabatan">
                        </div>
                    </div>
                    <div class="row">
                        <label for="idNamaKantorBayar" class="col-sm-3">ID - Kantor Bayar</label>
                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" disabled type="text" value="" id="idNamaKantorBayar">
                        </div>
                    </div>
                    <div class="row">
                        <label for="noRekening" class="col-sm-3">Nomor Rekening</label>
                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" disabled type="text" value="" id="noRekening">
                        </div>
                    </div>
                    <div class="row">
                        <label for="statusBayar1" class="col-sm-3">Status Bayar</label>
                        <div class="col-xs-6">
                            <label class="radio-inline">
                                <input type="radio"  name="statusBayar" checked id="statusBayar1" value="option1"/>
                                Dibayar
                            </label>

                            <label class="radio-inline">
                                <input type="radio"  name="statusBayar" disabled  id="statusBayar1" value="option2"/>
                                Berakhir
                            </label>
                        </div>
                    </div>
                    <br><br>
                    <div class="row">
                        <label for="totalBayar" class="col-sm-3">Total Hutang</label>
                        <div class="col-xs-6">
                            <input class="form-control form-control-sm" disabled type="text" value="" id="totalBayar">
                        </div>
                    </div>
                    <div class="row">
                        <label for="keterangan" class="col-sm-3">Keterangan</label>
                        <div class="col-xs-6">
                            <textarea class="form-control  form-control-sm" disabled  id="keterangan" rows="4"></textarea><br><br>
                        </div>
                    </div>
                </div>


                <div class="row"></div>

                <div class="card card-block">
                    <div class="card-title small bold">
                        Rincian Hutang
                    </div>

                    <div class="scroll-y scroll">
                        <div class="table-responsive">
                            <table class="table table-sm small" id="tblHutangDetail">
                                <thead>
                                <th>
                                    #
                                </th>
                                <th>
                                    Tanggal Mutasi
                                </th>
                                <th>
                                    Tanggal Transaksi
                                </th>
                                <th>
                                    Jumlah Hutang (Rp. )
                                </th>
                                <th>
                                    Kategori
                                </th>
                                <th>
                                    Keterangan
                                </th>
                                <th>
                                    Action
                                </th>
                                </thead>
                            </table>
                        </div>
                    </div>

                </div>
            </div>

            <div class="col-lg-12">
                <div class="col-lg-3">
                    <div class="row">
                        <label for="userStamp" class="col-xs-4">User Stamp</label>

                        <div class="col-xs-7">
                            <input class="form-control form-control-sm" type="text" value="" id="userStamp" disabled>

                        </div>
                    </div>

                </div>
                <div class="col-lg-3">
                    <div class="row">
                        <label for="user" class="col-xs-4">User Validasi</label>

                        <div class="col-xs-7">
                            <input class="form-control form-control-sm" type="text" value="" id="user" disabled>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
{{#modal}}

{{/modal}}

{{#scripts}}
<script src="{{contextPath}}/assets/vendor/datatables/media/js/jquery.dataTables.js"></script>
<script src="{{contextPath}}/assets/vendor/datatables/media/js/dataTables.bootstrap4.js"></script>
<script src="{{contextPath}}/assets/vendor/select2/js/select2.js"></script>
<script src="{{contextPath}}/assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="{{contextPath}}/assets/vendor/jquery-validation/dist/jquery.validate.js"></script>
<script src="{{contextPath}}/assets/vendor/numeral/numeral.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        const getHeaderData = function(){
            $.ajax({
                url: '{{linkHeaderHutang}}',
                data: {
                    nip: '{{nip}}',
                    periodeMutasi: '{{periodeMutasi}}'
                },
                success: function(response){
                    $('#nipNamaPeserta').val(response.nip + " - " + response.namaPeserta);
                    $('#idNamaPenerimaMp').val(response.idPenerimaMp + " - " + response.namaPenerimaMp);
                    $('#golonganJabatan').val(response.namaGolongan + " / " + response.namaJabatan);
                    $('#idNamaKantorBayar').val(response.idKantorBayar + " - " + response.namaKantorBayar);
                    $('#noRekening').val(response.rekeningPenerimaMp.nomorRekening);
                    $('#totalBayar').val(response.totalHutang.toLocaleString());
                    $('#keterangan').val(response.keterangan);
                }
            });
        };

        getHeaderData();



        var tblHutangDetail = dkppDataTable($('#tblHutangDetail'),'{{detailHutangLink}}/{{nip}}/{{periodeMutasi}}/',{
            'columns':[
                {"data":"idHutang"},
                {"data":"tglMutasi"},
                {"data":"tglTransaksi"},
                {"data":"jumlahHutang"},
                {"data":"idKategoriCatatan"},
                {"data":"keterangan"},
                {"data":"idHutang"}

            ],
            'columnDefs':[
                {
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                },
                {
                    "targets": 1,
                    "render": function(data, type, row, meta){
                        return fillDateField(row.tglMutasi);
                    }
                },
                {
                    "targets": 2,
                    "render": function(data, type, row, meta){
                        return fillDateField(row.tglTransaksi);
                    }
                },
                {
                    "targets": 3,
                    "render": function(data, type, row, meta){
                        return row.tglTransaksi.toLocaleString();
                    }
                },
                {
                    "targets": -1,
                    "render": function(data, type, row, meta){
                        return "<center><a href='{{contextPath}}/pembayaran/pembayaran-rekapitulasi-mp-bulanan'><button class=\"btn btn-primary btn-sm\" data-toggle=\"modal\" data-target=\".bd-example-modal\">" + "<i class=\"fa fa-eye\"></i> <span>Kirim ke PTR</span></button>"
                    }
                }
            ],
            "order": [[ 1, 'asc' ]],

        });
    });

</script>
{{/scripts}}

{{/layout}}